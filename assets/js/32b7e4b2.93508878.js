"use strict";(self.webpackChunkopenapi_qraft_website=self.webpackChunkopenapi_qraft_website||[]).push([[418],{9214:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"migrating-to-v2.6.0","title":"Migrating to OpenAPI Qraft v2.6.0","description":"This guide outlines the steps required to migrate your project to OpenAPI Qraft v2.6.0.","source":"@site/docs/migrating-to-v2.6.0.mdx","sourceDirName":".","slug":"/migrating-to-v2.6.0","permalink":"/openapi-qraft/docs/migrating-to-v2.6.0","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAPI-Qraft/openapi-qraft/edit/main/website/docs/migrating-to-v2.6.0.mdx","tags":[],"version":"current","sidebarPosition":151,"frontMatter":{"sidebar_position":151,"sidebar_label":"Migrating to v2.6.0"},"sidebar":"mainDocsSidebar","previous":{"title":"Migrating to v2","permalink":"/openapi-qraft/docs/migrating-to-openapi-qraft-v2"}}');var r=t(2540),s=t(3023);const o={sidebar_position:151,sidebar_label:"Migrating to v2.6.0"},a="Migrating to OpenAPI Qraft v2.6.0",c={},l=[{value:"Why These Changes Were Necessary",id:"why-these-changes-were-necessary",level:2},{value:"Key Changes",id:"key-changes",level:2},{value:"Removal of Generic Type Parameters from <code>qraftAPIClient</code>",id:"removal-of-generic-type-parameters-from-qraftapiclient",level:3},{value:"Type Updates Required in Contexts or Variables",id:"type-updates-required-in-contexts-or-variables",level:3},{value:"Migration Steps",id:"migration-steps",level:2},{value:"Automated Migration \ud83e\ude84",id:"automated-migration-",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"migrating-to-openapi-qraft-v260",children:"Migrating to OpenAPI Qraft v2.6.0"})}),"\n",(0,r.jsx)(n.p,{children:"This guide outlines the steps required to migrate your project to OpenAPI Qraft v2.6.0.\nThis version introduces a minor but important change to improve type inference and simplify the API."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Speed up your migration process with our automated ",(0,r.jsx)(n.a,{href:"#automated-migration-",children:"Codemod tool \ud83e\ude84"}),"!"]})}),"\n",(0,r.jsx)(n.h2,{id:"why-these-changes-were-necessary",children:"Why These Changes Were Necessary"}),"\n",(0,r.jsx)(n.p,{children:"While v2.6.0 is technically a minor version update, it includes a small breaking change that affects a limited number of users who work with low-level APIs. We made this decision for several important reasons:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Enhanced Modularity"}),": The API client can now be generated in a fully modular way, supporting new options like ",(0,r.jsx)(n.code,{children:"--create-api-client-fn"})," that allow for more customized client generation."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"More Precise Type Definitions"}),": To support these new options, we needed to make the return type from ",(0,r.jsx)(n.code,{children:"\u0441reateAPIClient()"})," function more specific than before."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Simplified Manual Creation"}),": When creating manually using the ",(0,r.jsx)(n.code,{children:"qraftAPIClient()"})," utility, you no longer need to specify custom types.\nThe ",(0,r.jsx)(n.code,{children:"\u0441reateAPIClient()"})," function now acts as a direct proxy for ",(0,r.jsx)(n.code,{children:"qraftAPIClient()"}),", with some additional code generation features."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Increased Flexibility"}),": These changes significantly increase the flexibility of the API Client and simplify its maintenance going forward."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"With these benefits in mind, we made the difficult decision to introduce this minor breaking change."}),"\n",(0,r.jsx)(n.h2,{id:"key-changes",children:"Key Changes"}),"\n",(0,r.jsxs)(n.h3,{id:"removal-of-generic-type-parameters-from-qraftapiclient",children:["Removal of Generic Type Parameters from ",(0,r.jsx)(n.code,{children:"qraftAPIClient"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Change"}),": Generic type parameters have been removed from ",(0,r.jsx)(n.code,{children:"qraftAPIClient"})," function calls."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": You no longer need to specify ",(0,r.jsx)(n.code,{children:"<Services, Callbacks>"})," when calling ",(0,r.jsx)(n.code,{children:"qraftAPIClient"}),". The types are now inferred automatically from the arguments."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const api = qraftAPIClient<Services, Callbacks>(services, callbacks, options);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const api = qraftAPIClient(services, callbacks, options);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"type-updates-required-in-contexts-or-variables",children:"Type Updates Required in Contexts or Variables"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Change"}),": Types created by the API client after calling ",(0,r.jsx)(n.code,{children:"createAPIClient"})," may need to be updated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": If you're using the return type of ",(0,r.jsx)(n.code,{children:"createAPIClient"})," in contexts or other variables, you'll need to update those types."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const APIContext = createContext<ReturnType<typeof createAPIClient>>>(null!);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { type services } from './api';\nimport { type APIDefaultQueryClientServices } from '@openapi-qraft/react';\nconst APIContext = createContext<APIDefaultQueryClientServices<typeof services>>(null!);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"migration-steps",children:"Migration Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Run the Codemod"}),": Use our automated codemod to remove generic type parameters from ",(0,r.jsx)(n.code,{children:"qraftAPIClient"})," calls."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update Context Types"}),": Update any types in contexts or variables that reference the return type of ",(0,r.jsx)(n.code,{children:"createAPIClient"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test Your Application"}),": Ensure that your application works correctly after the changes."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"automated-migration-",children:"Automated Migration \ud83e\ude84"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["This codemod is primarily needed for users who are writing low-level libraries or manually creating API clients without\nusing the generated ",(0,r.jsx)(n.code,{children:"createAPIClient"})," function. Most users who rely on the generated ",(0,r.jsx)(n.code,{children:"createAPIClient"})," function don't need to run this codemod."]})}),"\n",(0,r.jsxs)(n.p,{children:["We provide a Codemod script powered by ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/jscodeshift",children:(0,r.jsx)(n.code,{children:"jscodeshift"})}),"\nto automate most of the migration process."]}),"\n",(0,r.jsx)(n.p,{children:"Run this command in your project root to apply the migrations:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx jscodeshift@latest --extensions=tsx,ts --parser=tsx -t https://raw.githubusercontent.com/OpenAPI-Qraft/openapi-qraft/main/packages/react-client/src/migrate-to-v2.6.0-codemod.ts ./src/\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you're using a custom package name (not ",(0,r.jsx)(n.code,{children:"@openapi-qraft/react-client"}),"), you can specify it with the ",(0,r.jsx)(n.code,{children:"--packageName"})," option:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx jscodeshift@latest --extensions=tsx,ts --parser=tsx -t https://raw.githubusercontent.com/OpenAPI-Qraft/openapi-qraft/main/packages/react-client/src/migrate-to-v2.6.0-codemod.ts --packageName='@custom/package' ./src/\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This command will transform all ",(0,r.jsx)(n.code,{children:".tsx"})," and ",(0,r.jsx)(n.code,{children:".ts"})," files in your ",(0,r.jsx)(n.code,{children:"src"})," directory.\nAfter running the script, review the changes and make any necessary manual adjustments, especially for context types\nor other variables that use the return type of ",(0,r.jsx)(n.code,{children:"createAPIClient"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Following these steps and utilizing the automated migration tool will help you smoothly transition to OpenAPI Qraft v2.6.0."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3023:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(3696);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);