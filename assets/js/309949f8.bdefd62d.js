"use strict";(globalThis.webpackChunkopenapi_qraft_website=globalThis.webpackChunkopenapi_qraft_website||[]).push([[3663],{2491:(e,n,r)=>{r.d(n,{A:()=>o});r(3696);var a=r(1750);const t={tabItem:"tabItem_wHwb"};var i=r(2540);function o({children:e,hidden:n,className:r}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(t.tabItem,r),hidden:n,children:e})}},2696:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>f,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"codegen/CLI/redocly-config","title":"Redocly Config Support","description":"Qraft CLI can use a Redocly configuration file (redocly.yaml)","source":"@site/docs/codegen/CLI/redocly-config.mdx","sourceDirName":"codegen/CLI","slug":"/codegen/CLI/redocly-config","permalink":"/openapi-qraft/docs/codegen/CLI/redocly-config","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAPI-Qraft/openapi-qraft/edit/main/website/docs/codegen/CLI/redocly-config.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Redocly config support"},"sidebar":"mainDocsSidebar","previous":{"title":"CLI","permalink":"/openapi-qraft/docs/codegen/CLI/"},"next":{"title":"Predefined operation parameters","permalink":"/openapi-qraft/docs/codegen/CLI/create-predefined-parameters-request-fn"}}');var t=r(2540),i=r(3023),o=r(8296),l=r(2491);const s={sidebar_position:2,sidebar_label:"Redocly config support"},c="Redocly Config Support",u={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Configuration Example: Redocly \ud83e\udd1d Qraft",id:"configuration-example-redocly--qraft",level:3},{value:"Generating from Redocly Configuration",id:"generating-from-redocly-configuration",level:3},{value:"Generating Specific APIs",id:"generating-specific-apis",level:4},{value:"Authentication Configuration",id:"authentication-configuration",level:3},{value:"Extended Configuration Example",id:"extended-configuration-example",level:3},{value:"Generating Multiple <code>createAPIClient()</code> functions",id:"generating-multiple-createapiclient-functions",level:3}];function p(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"redocly-config-support",children:"Redocly Config Support"})}),"\n",(0,t.jsxs)(n.p,{children:["Qraft CLI can use a ",(0,t.jsx)(n.a,{href:"https://redocly.com/docs/cli/configuration",children:"Redocly configuration file"})," (",(0,t.jsx)(n.code,{children:"redocly.yaml"}),")\nto generate one or multiple API clients with custom settings and authentication rules. By integrating\nwith Redocly's powerful configuration schema resolution, you can\nstreamline client generation across various services defined in your project."]}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"Qraft CLI integrates with Redocly's configuration framework to simplify API client generation. This integration allows you to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define ",(0,t.jsx)(n.a,{href:"https://redocly.com/docs/cli/configuration/reference/apis",children:"multiple API entry points"})," in a single ",(0,t.jsx)(n.code,{children:"redocly.yaml"})," file"]}),"\n",(0,t.jsxs)(n.li,{children:["Apply consistent ",(0,t.jsx)(n.a,{href:"https://redocly.com/docs/cli/configuration/reference/rules",children:"validation rules"})," and settings across all APIs"]}),"\n",(0,t.jsx)(n.li,{children:"Centralize Qraft CLI options"}),"\n",(0,t.jsxs)(n.li,{children:["Configure ",(0,t.jsx)(n.a,{href:"https://redocly.com/docs/cli/configuration/reference/resolve",children:"authentication and header"})," definitions in one place"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"configuration-example-redocly--qraft",children:"Configuration Example: Redocly \ud83e\udd1d Qraft"}),"\n",(0,t.jsxs)(n.p,{children:["Here's a basic example of a ",(0,t.jsx)(n.code,{children:"redocly.yaml"})," configuration file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# Qraft CLI global config\nx-openapi-qraft:\n  plugin:\n    tanstack-query-react: true  # Generate React Query hooks for each API Client\n    openapi-typescript: true    # Generate TypeScript types for each API Client\n\napis:\n  # Main API configuration\n  main:\n    root: ./openapi.json  # Path to OpenAPI schema\n    # Qraft's specific configuration\n    x-openapi-qraft:\n      output-dir: src/api  # Output directory for a generated API client\n      clean: true          # Clean output directory before generation\n\n  # Legacy API configuration\n  legacy:\n    root: ./legacy-openapi.json\n    x-openapi-qraft:\n      output-dir: src/legacy-api\n      clean: true\n      # Filter services to only include user-related endpoints\n      filter-services:\n        - '/users/**'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"generating-from-redocly-configuration",children:"Generating from Redocly Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Using the configuration example above, you can generate API clients for both the main and legacy APIs with a single command:"}),"\n",(0,t.jsxs)(o.A,{groupId:"npm2yarn",children:[(0,t.jsx)(l.A,{value:"npm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx openapi-qraft --redocly\n"})})}),(0,t.jsx)(l.A,{value:"yarn",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn exec openapi-qraft --redocly\n"})})}),(0,t.jsx)(l.A,{value:"pnpm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm exec openapi-qraft --redocly\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"This command will:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Read the ",(0,t.jsx)(n.code,{children:"redocly.yaml"})," configuration"]}),"\n",(0,t.jsx)(n.li,{children:"Generate each API client specified in the configuration"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If your configuration file is located elsewhere, you can specify its path:"}),"\n",(0,t.jsxs)(o.A,{groupId:"npm2yarn",children:[(0,t.jsx)(l.A,{value:"npm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx openapi-qraft --redocly ./path/to/redocly.yaml\n"})})}),(0,t.jsx)(l.A,{value:"yarn",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn exec openapi-qraft --redocly ./path/to/redocly.yaml\n"})})}),(0,t.jsx)(l.A,{value:"pnpm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm exec openapi-qraft --redocly ./path/to/redocly.yaml\n"})})})]}),"\n",(0,t.jsx)(n.h4,{id:"generating-specific-apis",children:"Generating Specific APIs"}),"\n",(0,t.jsx)(n.p,{children:"You can also generate clients for specific APIs by listing their names:"}),"\n",(0,t.jsxs)(o.A,{groupId:"npm2yarn",children:[(0,t.jsx)(l.A,{value:"npm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx openapi-qraft legacy --redocly\n"})})}),(0,t.jsx)(l.A,{value:"yarn",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn exec openapi-qraft legacy --redocly\n"})})}),(0,t.jsx)(l.A,{value:"pnpm",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm exec openapi-qraft legacy --redocly\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"This is particularly useful when you want to generate only certain APIs from your configuration."}),"\n",(0,t.jsx)(n.h3,{id:"authentication-configuration",children:"Authentication Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["When working with private APIs that require authentication, you can configure authentication headers in your\n",(0,t.jsx)(n.code,{children:"redocly.yaml"})," file. This is particularly useful when your OpenAPI schemas are hosted on private servers or require API keys."]}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of how to configure authentication:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"resolve:\n  http:\n    headers:\n      - matches: https://api.example.com/v2/**\n        name: X-API-KEY\n        envVariable: API_KEY\n      - matches: https://example.com/*/test.yaml\n        name: Authorization\n        envVariable: AUTH_TOKEN\n"})}),"\n",(0,t.jsx)(n.p,{children:"The CLI will automatically use these credentials when fetching the OpenAPI schemas."}),"\n",(0,t.jsx)(n.h3,{id:"extended-configuration-example",children:"Extended Configuration Example"}),"\n",(0,t.jsxs)(n.p,{children:["Here's a more comprehensive example of a ",(0,t.jsx)(n.code,{children:"redocly.yaml"})," configuration that demonstrates advanced features:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# Enforce unique operationIds across all operations\nrules:\n  operation-operationId-unique:\n    severity: 'error'\n\napis:\n  main:\n    root: ../test-fixtures/openapi.json\n    x-openapi-qraft:\n      plugin:\n        tanstack-query-react: true\n        openapi-typescript: true\n      output-dir: src/tests/fixtures/api\n      clean: true\n      # Force .js/.ts extensions in imports (useful for ESM)\n      explicit-import-extensions: true\n      # Custom name for a generated types file\n      openapi-types-file-name: openapi.ts\n      # Filter which services to generate\n      filter-services:\n        - '/approval_policies/**'  # Include all approval policies\n        - '/entities/**'           # Include all entities\n        - '/files/**'             # Include all files\n        - '!/internal/**'         # Exclude internal endpoints\n      # Set default headers for specific endpoints\n      operation-predefined-parameters:\n        '/approval_policies/{approval_policy_id}/**': 'header.x-monite-entity-id'\n        '/entities/{entity_id}/documents': 'header.x-monite-version'\n      # Transform operation names using regex\n      operation-name-modifier:\n        - '/files/list:[a-zA-Z]+List ==> findAll'  # Rename all *List operations to findAll\n      # Override the type imports in the generated code with customs\n      override-import-type:\n        services:\n          '@openapi-qraft/tanstack-query-react-types':\n            OperationError: '../../type-overrides/operation-error.js'\n          '@tanstack/react-query':\n            UseQueryResult: '../../type-overrides/use-query-result.js'\n        create-api-client:\n          '@openapi-qraft/react':\n            CreateAPIQueryClientOptions: '../type-overrides/create-query-client-options.js'\n        create-predefined-parameters-request-fn:\n          '@openapi-qraft/react':\n            QraftPredefinedParameterValue: '../type-overrides/predefined-parameter-value.js'\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"generating-multiple-createapiclient-functions",children:["Generating Multiple ",(0,t.jsx)(n.code,{children:"createAPIClient()"})," functions"]}),"\n",(0,t.jsxs)(n.p,{children:["Qraft allows you to generate multiple ",(0,t.jsx)(n.em,{children:"create API client functions"})," with different parameters using the ",(0,t.jsx)(n.code,{children:"--create-api-client-fn"}),"\noption. This is particularly useful when you need to create specialized clients for different environments or use cases.\nFor more information on using options, please explore the ",(0,t.jsx)(n.a,{href:"/openapi-qraft/docs/codegen/CLI/",children:"CLI documentation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Here's an example of how to configure multiple ",(0,t.jsx)(n.em,{children:"create API client functions"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apis:\n  files:\n    root: ./openapi.json\n    x-openapi-qraft:\n      plugin:\n        tanstack-query-react: true\n        openapi-typescript: true\n      output-dir: src/api\n      # Generate multiple API client functions with different parameters\n      create-api-client-fn:\n        # Node.js API client with all services and callbacks\n        createInternalNodeAPIClient:\n          filename: create-internal-api-client  # Custom filename for the generated function\n          services: all                         # Include all services\n          callbacks: all                        # Include all callbacks\n\n        # React API client with specific callbacks only\n        createReactAPIClient:\n          services: none                        # Don't include any services directly\n          callbacks:                            # Include only specific callbacks\n            - setQueryData\n            - getQueryData\n            - getQueryKey\n            - getInfiniteQueryKey\n"})})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},3023:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var a=r(3696);const t={},i=a.createContext(t);function o(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},8296:(e,n,r)=>{r.d(n,{A:()=>A});var a=r(3696),t=r(1750),i=r(3237),o=r(766),l=r(9519),s=r(4395),c=r(5043),u=r(4544),d=r(4243);function p(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function f(e){const{values:n,children:r}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return p(e).map(({props:{value:e,label:n,attributes:r,default:a}})=>({value:e,label:n,attributes:r,default:a}))}(r);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const r=(0,l.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(t),(0,a.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})},[t,r])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,i=f(e),[o,l]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i})),[c,u]=m({queryString:r,groupId:t}),[p,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,t]=(0,d.Dv)(n);return[r,(0,a.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),y=(()=>{const e=c??p;return h({value:e,tabValues:i})?e:null})();(0,s.A)(()=>{y&&l(y)},[y]);return{selectedValue:o,selectValue:(0,a.useCallback)(e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)},[u,g,i]),tabValues:i}}var y=r(6681);const x={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var j=r(2540);function v({className:e,block:n,selectedValue:r,selectValue:a,tabValues:i}){const l=[],{blockElementScrollPositionUntilNextRender:s}=(0,o.a_)(),c=e=>{const n=e.currentTarget,t=l.indexOf(n),o=i[t].value;o!==r&&(s(n),a(o))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:a})=>(0,j.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{l.push(e)},onKeyDown:u,onClick:c,...a,className:(0,t.A)("tabs__item",x.tabItem,a?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:r}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===r);return e?(0,a.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function I(e){const n=g(e);return(0,j.jsxs)("div",{className:(0,t.A)(i.G.tabs.container,"tabs-container",x.tabList),children:[(0,j.jsx)(v,{...n,...e}),(0,j.jsx)(b,{...n,...e})]})}function A(e){const n=(0,y.A)();return(0,j.jsx)(I,{...e,children:p(e.children)},String(n))}}}]);