"use strict";(self.webpackChunkopenapi_qraft_website=self.webpackChunkopenapi_qraft_website||[]).push([[3258],{4526:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"eslint/no-unstable-deps","title":"No Unstable Deps","description":"Disallow putting the result of query hooks directly in a React hook dependency array","source":"@site/docs/eslint/no-unstable-deps.md","sourceDirName":"eslint","slug":"/eslint/no-unstable-deps","permalink":"/openapi-qraft/docs/eslint/no-unstable-deps","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAPI-Qraft/openapi-qraft/edit/main/website/docs/eslint/no-unstable-deps.md","tags":[],"version":"current","frontMatter":{"id":"no-unstable-deps","title":"No Unstable Deps"},"sidebar":"mainDocsSidebar","previous":{"title":"No Rest Destructuring","permalink":"/openapi-qraft/docs/eslint/no-rest-destructuring"},"next":{"title":"Migrating to v2","permalink":"/openapi-qraft/docs/migrating-to-openapi-qraft-v2"}}');var i=t(2540),r=t(3023);const o={id:"no-unstable-deps",title:"No Unstable Deps"},l=void 0,a={},c=[{value:"Rule Details",id:"rule-details",level:2},{value:"Attributes",id:"attributes",level:2},{value:"Options",id:"options",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"Disallow putting the result of query hooks directly in a React hook dependency array"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Rule ID"}),": ",(0,i.jsx)(n.code,{children:"@openapi-qraft/query/no-unstable-deps"})]}),"\n",(0,i.jsxs)(n.p,{children:["The object returned from the following Qraft hooks is ",(0,i.jsx)(n.strong,{children:"not"})," referentially stable:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useQuery"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useSuspenseQuery"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useQueries"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useSuspenseQueries"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useInfiniteQuery"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useSuspenseInfiniteQuery"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"qraft.service.operation.useMutation"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The object returned from those hooks should ",(0,i.jsx)(n.strong,{children:"not"})," be put directly into the dependency array of a React hook (e.g. ",(0,i.jsx)(n.code,{children:"useEffect"}),", ",(0,i.jsx)(n.code,{children:"useMemo"}),", ",(0,i.jsx)(n.code,{children:"useCallback"}),").\nInstead, destructure the return value and pass the destructured values into the dependency array."]}),"\n",(0,i.jsx)(n.h2,{id:"rule-details",children:"Rule Details"}),"\n",(0,i.jsxs)(n.p,{children:["Examples of ",(0,i.jsx)(n.strong,{children:"incorrect"})," code for this rule:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"/* eslint \"@openapi-qraft/query/no-unstable-deps\": \"warn\" */\nimport { useCallback } from 'React'\n\nfunction Component() {\n  const mutation = qraft.service.operation.useMutation()\n  const callback = useCallback(() => {\n    mutation.mutate({ body: 'hello' })\n  }, [mutation])\n  return null\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Examples of ",(0,i.jsx)(n.strong,{children:"correct"})," code for this rule:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"/* eslint \"@openapi-qraft/query/no-unstable-deps\": \"warn\" */\nimport { useCallback } from 'React'\n\nfunction Component() {\n  const { mutate } = qraft.service.operation.useMutation()\n  const callback = useCallback(() => {\n    mutate('hello')\n  }, [mutate])\n  return null\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"attributes",children:"Attributes"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u2705 Recommended"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\ud83d\udd27 Fixable"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["clientNamePattern (string or regex literal, optional): you can provide a string or a regex literal like ",(0,i.jsx)(n.code,{children:"/customClientName/i"})," to match your Qraft client root\nidentifier. Defaults to the case-insensitive regex ",(0,i.jsx)(n.code,{children:"/qraft|api/i"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},3023:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var s=t(3696);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);