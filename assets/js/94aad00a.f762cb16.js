"use strict";(self.webpackChunkopenapi_qraft_website=self.webpackChunkopenapi_qraft_website||[]).push([[6191],{9393:(e,n,t)=>{t.d(n,{A:()=>i});t(3696);var r=t(1750);const s={tabItem:"tabItem_wHwb"};var l=t(2540);function i(e){let{children:n,hidden:t,className:i}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,i),hidden:t,children:n})}},9942:(e,n,t)=>{t.d(n,{A:()=>g});var r=t(3696),s=t(1750),l=t(5162),i=t(9519),a=t(5367),u=t(271),o=t(5476),c=t(5095);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,o.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function f(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const s=(0,i.W6)(),l=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,u.aZ)(l),(0,r.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(s.location.search);n.set(l,e),s.replace({...s.location,search:n.toString()})}),[l,s])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,l=h(e),[i,u]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!f({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:l}))),[o,d]=p({queryString:t,groupId:s}),[y,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,l]=(0,c.Dv)(t);return[s,(0,r.useCallback)((e=>{t&&l.set(e)}),[t,l])]}({groupId:s}),x=(()=>{const e=o??y;return f({value:e,tabValues:l})?e:null})();(0,a.A)((()=>{x&&u(x)}),[x]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!f({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);u(e),d(e),m(e)}),[d,m,l]),tabValues:l}}var m=t(1173);const x={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var j=t(2540);function b(e){let{className:n,block:t,selectedValue:r,selectValue:i,tabValues:a}=e;const u=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),c=e=>{const n=e.currentTarget,t=u.indexOf(n),s=a[t].value;s!==r&&(o(n),i(s))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;n=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;n=u[t]??u[u.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:l}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>u.push(e),onKeyDown:d,onClick:c,...l,className:(0,s.A)("tabs__item",x.tabItem,l?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function q(e){let{lazy:n,children:t,selectedValue:s}=e;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function v(e){const n=y(e);return(0,j.jsxs)("div",{className:(0,s.A)("tabs-container",x.tabList),children:[(0,j.jsx)(b,{...n,...e}),(0,j.jsx)(q,{...n,...e})]})}function g(e){const n=(0,m.A)();return(0,j.jsx)(v,{...e,children:d(e.children)},String(n))}},8952:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>u,default:()=>f,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var r=t(2540),s=t(3023),l=t(9942),i=t(9393);const a={sidebar_label:"fetchQuery()"},u="fetchQuery(...)",o={id:"query-client/fetchQuery",title:"fetchQuery(...)",description:"The method allows you to execute a Queries without React Hooks with the full power of QueryClient.",source:"@site/docs/query-client/fetchQuery.mdx",sourceDirName:"query-client",slug:"/query-client/fetchQuery",permalink:"/openapi-qraft/docs/query-client/fetchQuery",draft:!1,unlisted:!1,editUrl:"https://github.com/OpenAPI-Qraft/openapi-qraft/edit/main/website/docs/query-client/fetchQuery.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"fetchQuery()"},sidebar:"mainDocsSidebar",previous:{title:"fetchInfiniteQuery()",permalink:"/openapi-qraft/docs/query-client/fetchInfiniteQuery"},next:{title:"getInfiniteQueryData()",permalink:"/openapi-qraft/docs/query-client/getInfiniteQueryData"}},c={},d=[{value:"Arguments",id:"arguments",level:3},{value:"Returns",id:"returns",level:3},{value:"Examples",id:"examples",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",del:"del",em:"em",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"fetchquery",children:"fetchQuery(...)"}),"\n",(0,r.jsxs)(n.p,{children:["The method allows you to execute a ",(0,r.jsx)(n.em,{children:"Queries"})," without React Hooks with the full power of ",(0,r.jsx)(n.em,{children:"QueryClient"}),".\nTo understand how ",(0,r.jsx)(n.code,{children:"fetchQuery"})," handles data and cache management,\nrefer to the TanStack ",(0,r.jsx)(n.a,{href:"https://tanstack.com/query/latest/docs/reference/QueryClient#queryclientfetchquery",children:(0,r.jsx)(n.em,{children:"queryClient.fetchQuery \ud83c\udf34"})})," documentation."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"fetchQuery"})," is particularly useful for server-side data fetching (SSR). When used on the server, it automatically\nprovides all the retry logic and caching capabilities inherent to TanStack Query.\nThis makes it an excellent choice for efficient and robust server-side data retrieval, ensuring your application benefits\nfrom built-in error handling and performance optimizations."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const result = qraft.<service>.<operation>.fetchQuery(\n  {\n    parameters,\n    requestFn,\n    baseUrl,\n    ...fetchQueryOptions,\n  },\n  queryClient\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"parameters: { path, query, header } | QueryKey | {}"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Required"}),", OpenAPI request parameters for the query, strictly-typed \u2728"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"parameters"})," will be used to generate the ",(0,r.jsx)(n.code,{children:"QueryKey"})]}),"\n",(0,r.jsxs)(n.li,{children:["If operation does not require parameters, you must pass an empty object ",(0,r.jsx)(n.code,{children:"{}"})," for strictness"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"requestFn: RequestFn"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optional"}),", a function that will be used to execute the request"]}),"\n",(0,r.jsxs)(n.li,{children:["The function should be provided, otherwise it will throw an error if default ",(0,r.jsx)(n.code,{children:"queryFn"})," is not set previously using ",(0,r.jsx)(n.code,{children:"QueryClient.setDefaultOptions(...)"})," method"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"baseUrl: string"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Required if ",(0,r.jsx)(n.code,{children:"requestFn"})," is set"]}),", the base URL of the API"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"...fetchQueryOptions?: FetchQueryOptions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optional"}),", represents the rest options of the ",(0,r.jsx)(n.a,{href:"https://tanstack.com/query/latest/docs/reference/QueryClient#queryclientfetchquery",children:(0,r.jsx)(n.em,{children:"fetchQuery(...) \ud83c\udf34"})})," method","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"queryOptions.queryFn"})," could be provided instead of ",(0,r.jsx)(n.del,{children:(0,r.jsx)(n.code,{children:"requestFn"})})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"queryOptions.queryKey"})," could be provided instead of ",(0,r.jsx)(n.del,{children:(0,r.jsx)(n.code,{children:"parameters"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"queryClient: QueryClient"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Required"})," ",(0,r.jsx)(n.a,{href:"https://tanstack.com/query/latest/docs/reference/QueryClient",children:(0,r.jsx)(n.em,{children:"QueryClient \ud83c\udf34"})})," to be used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"If not provided"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"QraftContext.queryClient"})," will be used if available"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://tanstack.com/query/latest/docs/framework/react/reference/useQueryClient",children:(0,r.jsx)(n.em,{children:"useQueryClient() \ud83c\udf34"})}),"\nresult will be used as a fallback"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"result: Promise<T>"})," - The result of the query execution"]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(i.A,{value:"example1",label:(0,r.jsxs)(n.span,{style:{verticalAlign:"middle"},children:["With ",(0,r.jsx)(n.code,{children:"requestFn"})]}),default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"/**\n * Will execute the request:\n * ###\n * GET /posts?limit=10\n **/\nimport { requestFn } from '@openapi-qraft/react';\nimport { QueryClient } from '@tanstack/react-query';\n\nconst queryClient = new QueryClient();\n\nconst posts = await qraft.posts.getPosts.fetchQuery(\n  {\n    parameters: { query: { limit: 10 } },\n    /**\n     * Request function should be provided, otherwise it will throw an error\n     * if default `queryFn` is not set previously using\n     * `QueryClient.setDefaultOptions(...)` method\n     */\n    requestFn: requestFn,\n    baseUrl: 'https://api.sandbox.monite.com/v1', // must be provided if `requestFn` is set\n  },\n  queryClient\n);\n"})})}),(0,r.jsx)(i.A,{value:"with-query-fn",label:(0,r.jsxs)(n.span,{style:{verticalAlign:"middle"},children:["With ",(0,r.jsx)(n.code,{children:"queryFn"})]}),children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { QueryClient } from '@tanstack/react-query';\nimport { myCustomQueryFn } from './myCustomQueryFn';\n\nconst queryClient = new QueryClient();\n\n/**\n * Will execute the request:\n * ###\n * GET /posts?limit=10\n **/\nconst posts = await qraft.posts.getPosts.fetchQuery(\n  {\n    // \u2b07\ufe0e `queryKey` could be provided instead of `parameters`\n    queryKey: qraft.posts.getPosts.getQueryKey({ query: { limit: 10 } }),\n    // \u2b07\ufe0e `queryFn` could be provided instead of `requestFn`\n    queryFn: myCustomQueryFn,\n  },\n  queryClient\n);\n"})})}),(0,r.jsx)(i.A,{value:"with-default-query-fn",label:(0,r.jsxs)(n.span,{style:{verticalAlign:"middle"},children:["With default ",(0,r.jsx)(n.code,{children:"queryFn"})]}),children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { QueryClient } from '@tanstack/react-query';\nimport { myCustomQueryFn } from './myCustomQueryFn';\n\nconst queryClient = new QueryClient();\n\n/**\n * Set default `queryFn` for the `getPosts` Queries\n */\nqueryClient.setQueryDefaults(\n  qraft.posts.getPosts.fetchQuery.getQueryKey(),\n  { queryFn: myCustomQueryFn } // `myCustomQueryFn` will be used for all `getPosts` Queries\n);\n\n/**\n * Will execute the request:\n * ###\n * GET /posts?limit=10\n **/\nconst posts = await qraft.posts.getPosts.fetchQuery(\n  { parameters: { query: { limit: 10 } } },\n  queryClient\n);\n"})})})]})]})}function f(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},3023:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(3696);const s={},l=r.createContext(s);function i(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);