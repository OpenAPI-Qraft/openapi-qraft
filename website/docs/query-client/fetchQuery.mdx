---
sidebar_label: fetchQuery()
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# fetchQuery(...)

The method allows you to execute a _Queries_ without React Hooks with the full power of _QueryClient_.
To understand how `fetchQuery` handles data and cache management,
refer to the TanStack [_queryClient.fetchQuery ðŸŒ´_](https://tanstack.com/query/latest/docs/reference/QueryClient#queryclientfetchquery) documentation.

:::tip
`fetchQuery` is particularly useful for server-side data fetching (SSR). When used on the server, it automatically
provides all the retry logic and caching capabilities inherent to TanStack Query.
This makes it an excellent choice for efficient and robust server-side data retrieval, ensuring your application benefits
from built-in error handling and performance optimizations.
:::

```ts
const result = api.<service>.<operation>.fetchQuery(
  {
    parameters,
    ...fetchQueryOptions,
  }
);
```

### Arguments

1. -  `parameters: { path, query, header } | QueryKey | void`
      - **Required**, OpenAPI request parameters for the query, strictly-typed âœ¨
      - `parameters` will be used to generate the `QueryKey`
      - `requestFn?: RequestFn`
        - **Optional**, a function that will be used to execute the request
      - `baseUrl?: string`
        - **Optional**, the base URL of the API
      - `...fetchQueryOptions?: FetchQueryOptions`
        - **Optional**, represents the rest options of the [_fetchQuery(...) ðŸŒ´_](https://tanstack.com/query/latest/docs/reference/QueryClient#queryclientfetchquery) method
        - `queryOptions.queryFn` could be provided instead of ~~`requestFn`~~
        - `queryOptions.queryKey` could be provided instead of ~~`parameters`~~

### Returns

`result: Promise<T>` - The result of the query execution

### Examples

<Tabs>
  <TabItem value="example1" label="Basic" default>
    ```ts
    import { createAPIClient } from './api'; // generated by OpenAPI Qraft CLI
    import { requestFn } from '@openapi-qraft/react';
    import { QueryClient } from '@tanstack/react-query';

    const api = createAPIClient({
      requestFn,
      queryClient: new QueryClient(),
      baseUrl: 'https://api.sandbox.monite.com/v1',
    });

    /**
     * Executes the request:
     * ###
     * GET /posts?limit=10
     **/
    const posts = await api.posts.getPosts.fetchQuery(
      { parameters: { query: { limit: 10 } } }
    );
    ```
  </TabItem>
  <TabItem value="with-query-fn" label={<span style={{verticalAlign: 'middle'}}>With <code>queryFn</code></span>}>
    ```ts
    import { createAPIClient } from './api'; // generated by OpenAPI Qraft CLI
    import { requestFn } from '@openapi-qraft/react';
    import { QueryClient } from '@tanstack/react-query';

    const api = createAPIClient({
      requestFn,
      queryClient: new QueryClient(),
      baseUrl: 'https://api.sandbox.monite.com/v1',
    });

    /**
     * Executes the request:
     * ###
     * GET /posts?limit=10
     **/
    const posts = await api.posts.getPosts.fetchQuery(
      {
        // â¬‡ï¸Ž `queryKey` could be provided instead of `parameters`
        queryKey: api.posts.getPosts.getQueryKey({ query: { limit: 10 } }),
        // â¬‡ï¸Ž `queryFn` could be provided
        queryFn: function myCustomQueryFn({ queryKey, ...rest }) {
          // ...
        },
      }
    );
    ```
  </TabItem>
</Tabs>
